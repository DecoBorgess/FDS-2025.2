{% extends "app1/html/base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'app1/css/saidas.css' %}">

<div class="form-card">
  <h1>Registrar Sa√≠da</h1>
  <div class="fieldset-title">Preencha os dados</div>

  {% if errors %}
    <ul class="form-error">
      {% for error in errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <form method="post" action="{% url 'saidas' %}">
    {% csrf_token %}

    <div class="form-grid">
      <div class="form-group" style="grid-column:1/-1;">
        <label for="id_descricao">Descri√ß√£o</label>
        <select class="form-control" name="descricao" id="id_descricao" required>
          <option value="">-- selecione --</option>
          {% for value, label in opcoes_descricao %}
            <option value="{{ value }}" {% if value == selected_descricao %}selected{% endif %}>
              {{ label }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="id_valor">Valor</label>
        <input class="form-control" type="number" step="0.01" name="valor" id="id_valor"
               value="{{ valor|default:'' }}" required>
      </div>

      <div class="form-group">
        <label for="id_date">Data</label>
        <input class="form-control" type="date" name="date" id="id_date"
               value="{{ date|default:'' }}" required>
      </div>

      <!-- üîπ Novo campo: Limite de Gasto Mensal -->
      <div class="form-group" style="grid-column:1/-1;">
        <label for="id_valor_limite">Limite de Gasto Mensal (opcional)</label>
        <input class="form-control" type="number" step="0.01" name="valor_limite" id="id_valor_limite"
               placeholder="Digite o limite de gasto mensal" value="{{ valor_limite|default:'' }}">
      </div>

      <div class="form-divider"></div>
    </div>

    <div class="actions">
      <button class="btn" type="submit">Enviar</button>
    </div>

    <input type="hidden" name="next" value="{% url 'index' %}" />
  </form>
</div>

<!-- Adicionado: container de transa√ß√µes -->
<div class="lista-transacoes">
  {% for saida in saidas %}
    <div class="transacao">
      <span class="descricao">{{ saida.descricao }}</span>
      <span class="valor">{{ saida.valor }}</span>
    </div>
  {% empty %}
    <div class="transacao">Nenhuma sa√≠da registrada.</div>
  {% endfor %}
</div>

{% endblock content %}
